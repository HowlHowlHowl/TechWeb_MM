<!DOCTYPE html>
<html lang="it">
<head>
    <title>Author</title>
    <meta charset="UTF-8">
    
    <!-- Libraries from CDN -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    
    <!-- Internal -->
    <link rel="stylesheet" href="/public/css/author.css">
    <script src="/public/js/author_nodes.js"></script>
    <script src="/public/js/author_editor.js"></script>
</head>
<body>
    <!-- Area principale -->
    <div class="row p-3" id="editor">
        <!-- Area gestione storie -->
        <div class="col-2" id="editor-stories">
            <h4>Pubblicate</h4>
            <button class="btn btn-primary mb-1 btn-block" onclick="newStory(true)">Crea nuova storia</button>
            <div class="list-group" id="stories-published">
            
            </div> 
            
            <div class="p-3"></div>
            
            <h4>Archiviate</h4>
            <button class="btn btn-primary mb-1 btn-block" onclick="newStory(false)">Crea nuova storia</button>
            
            <div class="list-group" id="stories-archived">
            </div>
        </div>
        
        
        <!-- Placeholder per area editor -->
        <div class="col-10" id="editor-placeholder">
            <p>Seleziona una storia da modificare</p>
        </div>
        
        <!-- Area editor -->
        <div class="col-8 d-none" id="editor-area-activities">
            <div class="flex-container">
                <div class="flex-header">
                    <input type="text" class="editable-name" id="editor-name" onchange="editorNameChange(this)">
                    <div class="form-check p-3">
                        <button class="btn btn-primary float-right btn-lg" onclick="saveSelectedStory()">Salva</button>
                        <input type="checkbox" class="form-check-input" id="editor-accessible" onchange="editorAccessibleChange(this)">
                        <label class="form-check-label" for="editor-accessible">Accessibile</label>
                    </div>
                    <button class="btn btn-primary" onclick="editorNewActivity()">Nuova attività</button>
                </div>
                
                <div class="flex-content">
                    <div id="node-canvas">
                        <div id="canvas-transform">
                            
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        
        <div class="col-2 d-none" id="editor-area-missions">
            <h1>Missioni</h1>
            <div id="editor-missions">
            </div>
            <button class="btn btn-primary" onclick="editorNewMission()">Nuova missione</button>
        </div>
        
    </div>
    
    <!-- Finestra modale di editing delle attività -->
    <div class="modal" id="activity-modal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Modifica attività</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h6>Nome:</h6>
            <div class="editable-name-div">
                <input type="text" class="editable-name activity-name">
            </div>
            
            <hr>
            
            <h6>Missione:</h6>
            <div class="dropdown">
              <button class="btn btn-info dropdown-toggle select-mission" type="button" data-toggle="dropdown"></button>
              <div class="dropdown-menu mission-options">
                <button class="dropdown-item" type="button">Action</button>
              </div>
            </div>
            
            <hr>
            
            <h6>Contenuti:</h6>
            <div class="contents-div">
            </div>
            
            <div class="btn-group activity-add-group" role="group">
                <button class="btn btn-info btn-sm add-text" title="Testo">Text</button>
                <button class="btn btn-info btn-sm add-image" title="Immagine">Image</button>
                <button class="btn btn-info btn-sm add-video" title="Video">Video</button>
            </div>
            
            <hr>
            
            <h6>Input:</h6>
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-info active input-text">
                <input type="radio" name="options">Testo
              </label>
              <label class="btn btn-info input-number">
                <input type="radio" name="options">Numero
              </label>
              <label class="btn btn-info input-photo">
                <input type="radio" name="options">Foto
              </label>
              <label class="btn btn-info input-none">
                <input type="radio" name="options">Niente
              </label>
            </div>
            
          </div>
        </div>
      </div>
    </div>
    
    <!-- Finestra modale di salvataggio -->
    <div class="modal" id="save-modal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Modifiche non salvate</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Salvare le modifiche effettuate?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal" onClick="modalSave()">Salva</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" onClick="modalDiscard()">Scarta</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Annulla</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Finestra modale di eliminazione -->
    <div class="modal" id="delete-modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Eliminazione</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p id="modal-delete-message"></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal" id="modal-delete-button" onclick="actionOnStory($(this).attr('delete-id'), 'delete')">Elimina</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Annulla</button>
          </div>
        </div>
      </div>
    </div>
    
    
    <!-- template per widget della storia -->
    <template id="template-story">
        <div class="btn-group story-div" role="group">
            <button class="list-group-item list-group-item-action"></button>
            <button class="btn btn-outline-primary btn-sm story-qr" title="Genera QRCode">QR</button>
            <button class="btn btn-outline-primary btn-sm story-del" title="Elimina">Del</button>
            <button class="btn btn-outline-primary btn-sm story-swap" title="Pubblica/Archivia">Swap</button>
            <button class="btn btn-outline-primary btn-sm story-dup" title="Duplica">Dup</button>
        </div>
    </template>
    
    
    <!-- template per editor missione -->
    <template id="template-mission">
        <div class="p-3 mission-div">
            <div class="btn-group float-right" role="group">
                <button class="btn btn-secondary btn-sm mission-del" title="Elimina">Del</button>
                <button class="btn btn-secondary btn-sm mission-copy" title="Copia">Copy</button>
            </div>
            
            <div class="editable-name-div">
                <input type="text" class="editable-name mission-name">
            </div>
            <input class="form-control mission-col" type="color" value="#563d7c" id="example-color-input">
        </div>
    </template>
    
    <!-- template per contenuto attività -->
    <template id="template-content">
        <div class="content-div">
            <div class="btn-group-vertical content-buttons">
                <button class="btn btn-info btn-sm content-del" title="Elimina">Del</button>
                <button class="btn btn-info btn-sm content-up" title="Sposta in alto">Up</button>
                <button class="btn btn-info btn-sm content-down" title="Sposta in basso">Down</button>
            </div>
            <div class="content-item">
            </div>
        </div>
    </template>
    
    <!-- template per contenuto immagine -->
    <template id="template-content-image">
        <div class="content-image">
            <image src="" style="max-height: 200px; max-width : 800px;">
            
            <label class="file-upload-label btn btn-success btn-sm">
                <input type="file" name="file[]" accept="image/*" style="display: none;">
                Carica immagine
            </label>
            <span class="file-upload-name"></span>
        </div>
    </template>
    
    <!-- template per contenuto video -->
    <template id="template-content-video">
        <div class="content-video">
            <video controls>
              <source src="">
                Your browser does not support HTML5 video.
            </video>
            
            <label class="file-upload-label btn btn-success btn-sm">
                <input type="file" name="file[]" accept="video/*" style="display: none;">
                Carica video
            </label>
            <span class="file-upload-name"></span>
        </div>
    </template>
    
    <!-- template per i nodi -->
    <template id="template-node">
        <div class="node ui-widget-content">
            <div class="node-header">
                <div class="buttons">
                    <button class="btn btn-success btn-sm copy">C</button>
                    <button class="btn btn-success btn-sm delete">D</button>
                </div>
                
                <input class="name" type="text">
            </div>
            <div class="node-body">
            </div>
            <div class="node-inouts">
                <div class="node-inputs">
                </div>
                <div class="node-outputs">
                </div>
            </div>
        </div>
    </template>
    
</body>
</html>
